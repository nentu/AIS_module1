# Lab1

<!-- TOC -->
* [Lab1](#lab1)
  * [Задание](#задание)
    * [Часть 1. Создание базы знаний и выполнение запросов в Prolog](#часть-1-создание-базы-знаний-и-выполнение-запросов-в-prolog)
    * [Часть 2. Создание онтологии в Protege](#часть-2-создание-онтологии-в-protege)
  * [Решение](#решение)
    * [Часть 1. База знаний](#часть-1-база-знаний)
      * [база знаний](#база-знаний)
      * [Запросы](#запросы)
<!-- TOC -->

## Задание

### Часть 1. Создание базы знаний и выполнение запросов в Prolog

Требуется создать базу знаний в языке программирования Prolog и реализовать набор запросов, используя эту базу знаний.
Задача направлена на развитие навыков работы с фактами, предикатами, и правилами в логическом программировании.

**Задание**

- **Создание базы знаний:**

  Создайте базу знаний. База знаний должна включать в себя **не менее 20 фактов с одним аргументом, 10-15 фактов с двумя
  аргументам, которые дополняют и показывают связь с другими фактами и 5-7 правил.** Факты могут описывать объекты, их
  свойства и отношения между ними. Факты 2 и более аргументами могут описывать различные атрибуты объектов, а правила -
  логические законы и выводы, которые можно сделать на основе фактов и предикатов.

- **Выполнение запросов:**

  Напишите несколько запросов для БЗ. Запросы **должны быть разной сложности** и включать в себя:

    - Простые запросы к базе знаний для поиска фактов.
    - Запросы, использующие логические операторы (**и, или, не**) для формулирования сложных условий (или использовать
      логические операторы в правилах).
    - Запросы, использующие переменные для поиска объектов с определенными характеристиками.
    - Запросы, которые требуют выполнения правил для получения результата.
- **Документация:**

  В коде должны быть комментарии описания фактов, предикатов и правил.

**Критерии оценки**

- Корректность базы знаний и выполненных запросов.
- Сложность и разнообразие запросов.
- Качество документации и комментариев к коду.

**Тематики БЗ**

Любая, связанная с играми. Например,

- Видеоигры
- Правила настольных игр
- Профили игроков
- Игровые персонажи
- История игры
- Игровые механики

### Часть 2. Создание онтологии в Protege

Целью этой лабораторной работы является знакомство со средой разработки онтологий Protege и перевод базы знаний,
созданной в предыдущей лабораторной работе в онтологическую форму в Protege.

**Задание**

Преобразовать факты и отношения из Prolog в концепты и свойства в онтологии. Описать классы и свойства в онтологии,
которые соответствуют объектам и отношениям из базы знаний. Например, если у были классы "Человек" и "Машина" и
свойство "возраст", создайте аналогичные классы и свойства в онтологии в Protege.

**Критерии оценки**

- Корректное создание онтологии в Protege на основе базы знаний в Prolog.
- Качество перевода фактов, предикатов и отношений из Prolog в онтологию.
- Определение классов, свойств и иерархии классов в Protege.
- Тестирование онтологии и демонстрация ее функциональности (визуализация и проверка запросов).

## Решение

### Часть 1. База знаний

База знаний описывает 2 ветки танков в игре World of Tanks Blitz.

Создадим факты описывающие танки

`heavy` - тяжелый - Много брони, но мало скорости
`medium` - средний - есть и броня и скорость
`light` - лёгкий - мало брони, но быстрый

#### база знаний

```
%England
country(cruiserII, england).

light(cruiserII).       %1
medium(cruiserIII).     %2
medium(cruiserIV).      %3
heavy(matilda).         %4
heavy(churchill).       %5
heavy(blackPrince).     %6 
heavy(caernarvon).      %7
heavy(conquerror).      %8
heavy(fv215b).          %9

%France
country(r35, france).

medium(r35).        %1
medium(amx38).      %2
heavy(d2).          %3
heavy(b1).          %4
light(amx12t).      %5
light(amx1375).     %6
light(amx1390).     %7
light(bc25tAP).     %8
light(bc25t).       %9

```

Развитие танка можно представить в виде графа, в каждом узле которого будет новая модель

```
%Branch. You can upgrade T1 to get T2
upgrade(cruiserII, cruiserIII, fact).
upgrade(cruiserIII, cruiserIV, fact).
upgrade(cruiserIV, matilda, fact).
upgrade(matilda, churchill, fact).
upgrade(churchill, blackPrince, fact).
upgrade(blackPrince, caernarvon, fact).
upgrade(caernarvon, conquerror, fact).
upgrade(conquerror, fv215b, fact).
upgrade(r35, amx38, fact).
upgrade(amx38, d2, fact).
upgrade(d2, b1, fact).
upgrade(b1, amx12t, fact).
upgrade(amx12t, amx1375, fact).
upgrade(amx1375, amx1390, fact).
upgrade(amx1390, bc25tAP, fact).
upgrade(bc25tAP, bc25t, fact).
```

Больше уровень - выше броня и скорость

```
level(cruiserII, 1).
level(r35, 1).

%transitivity of upgrade option
upgrade(T1, T2, rule) :- upgrade(T1, T3, fact), upgrade(T3, T2, _).

%All tanks in one branch are from the same country
country(T1, C) :- upgrade(T2, T1, _) , country(T2, C).

%get tank level
level(T, Lvl) :-
    upgrade(PrevT, T, fact),
    level(PrevT, N),
    Lvl is N + 1.

%T2 is more protected than T1
protected(T1, T2) :- 
    (level(T1, Lvl1), level(T2, Lvl2), Lvl2 - Lvl1 > 0) ;
    (heavy(T2), medium(T1)) ;
    (heavy(T2), light(T1)) ;
    (medium(T2), light(T1)).

%T2 is faster than T1
faster(T1, T2) :- 
    (level(T1, Lvl1), level(T2, Lvl2), Lvl2 - Lvl1 > 0) ;
    (medium(T2), heavy(T1)) ;
    (light(T2), heavy(T1)) ;
    (light(T2), medium(T1)).
```

#### Запросы

Есть ли тяжёлый танк Матильда?

- `heavy(matilda).`
- `true`

Все средние танки

- `?- medium(T).`

```
T = cruiserIII ;
T = cruiserIV ;
T = r35 ;
T = amx38.
```

Какой уровень и чёрного принца

- `?- level(blackPrince, Level).`
- `Level = 6 .`

Можно ли из cruiserIV прокачаться в fv215b?

- `?- upgrade(cruiserIV, fv215b, _).`
- `true`

А в amx1390?

- `?- upgrade(cruiserIV, amx1390, _).`
- `false`

Посмотреть страну conquerror

- `?- country(conquerror, C).`
- `C = england .`

Все танки, которые быстрее caernarvon

- `?- faster(caernarvon, T).`

```
T = conquerror ;
T = fv215b ;
T = bc25tAP ;
T = bc25t ;
T = cruiserIII ;
T = cruiserIV ;
T = r35 ;
T = amx38 ;
T = cruiserII ;
T = amx12t ;
T = amx1375 ;
T = amx1390 ;
T = bc25tAP ;
T = bc25t ;
false.
```

А в какие из этих танков можно вкачаться из caernarvon

- `faster(caernarvon, T) , upgrade(caernarvon, T, _).`

```
T = conquerror ;
T = fv215b ;
false.
```

